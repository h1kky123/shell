## Компиляция

Для компиляции **MyShell** выполните следующую команду в терминале:

```bash
gcc main.c -o myshell -D_FILE_OFFSET_BITS=64 -lfuse
```

- `-D_FILE_OFFSET_BITS=64` — для поддержки больших файлов.
- `-lfuse` — для подключения библиотеки FUSE, необходимой для работы с виртуальными файловыми системами.

## Использование

После успешной компиляции вы можете запустить шелл командой:

```bash
./myshell
```

### Поддерживаемые команды

- **Выход из шелла**
  - Команды: `\q`, `\exit`, `Ctrl+D`
  - Эти команды позволят вам выйти из шелла.

- **Исполнение стандартных бинарников**
  - Вы можете выполнять любые стандартные команды, такие как `ls`, `cat`, `touch`, и т.п.
  - Пример использования:
    ```
    > ls
    > touch newfile.txt
    > cat newfile.txt
    ```

- **Вывод переменной окружения**
  - Команда: `\e $<имя_переменной>`
  - Позволяет вывести значение переменной окружения.
  - Пример использования:
    ```
    > \e $PATH
    ```

- **Перезагрузка конфигурации с помощью SIGHUP**
  - Команда для другого терминала: `sudo kill -SIGHUP <pid>`
  - Когда вы отправляете сигнал SIGHUP вашему шеллу, он выводит сообщение `Configuration reloaded` и продолжает свою работу.
  - Пример:
    1. Откройте другой терминал и выполните:
       ```
       sudo kill -SIGHUP <pid_нашего_шелла>
       ```
    2. В вашем шелле должно появиться сообщение `Configuration reloaded`.

- **Определение загрузочного диска**
  - Команда: `\l <устройство>` (например, `sda`, `sdb`, `sr0` и т.д.)
  - Эта команда позволяет проверить, является ли указанный диск загрузочным, проверяя наличие сигнатуры 0xAA55 в загрузочном секторе.
  - Пример использования:
    ```
    > \l sda
    ```

- **Подключение VFS в `/tmp/vfs` со списком задач в cron**
  - Команда: `\cron`
  - Монтирует виртуальную файловую систему (VFS) в `/tmp/vfs`, предоставляя доступ к задачам cron текущего пользователя.
  - После выполнения команды файл `tasks` будет доступен в `/tmp/vfs`, содержащий список всех текущих задач cron.
  - Пример использования:
    ```
    > \cron
    > cat /tmp/vfs/tasks
    ```

- **Получение дампа памяти процесса**
  - Команда: `\mem <procid>`
  - Создаёт дамп памяти указанного процесса и сохраняет его в файл `memory_dump_<procid>.txt`. Рекомендуется читать этот файл через `cat`, так как при попытке открыть его в редакторе он может зависнуть из-за большого размера.
  - Пример использования:
    ```
    > \mem 1234
    > cat memory_dump_1234.txt
    ```

## Особенности реализации

- **FUSE для виртуальной файловой системы**: MyShell использует FUSE для создания виртуальной файловой системы, которая предоставляет доступ к задачам cron, отображая их как файл `tasks`.
- **Поддержка сигналов**: Реализована поддержка обработки сигнала SIGHUP для перезагрузки конфигурации.
- **Проверка загрузочных дисков**: Команда `\l` позволяет определить, является ли указанный диск загрузочным, проверяя наличие специальной сигнатуры.

## Примеры использования

1. **Запуск и выполнение команды `ls`**
   ```
   > ./myshell
   > ls
   ```

2. **Проверка загрузочного диска**
   ```
   > \l sda
   Диск /dev/sda является загрузочным (сигнатура 0xAA55 найдена).
   ```

3. **Подключение VFS и просмотр задач cron**
   ```
   > \cron
   VFS успешно смонтирован в /tmp/vfs. Список задач cron доступен.
   > cat /tmp/vfs/tasks
   * * * * * /home/user/backup.sh
   ```

## Требования

- **FUSE**: Убедитесь, что FUSE установлен в системе. Вы можете установить его с помощью:
  ```bash
  sudo apt install fuse
  ```

- **Права суперпользователя**: Для некоторых команд, таких как монтирование VFS и отправка сигнала SIGHUP, требуются права суперпользователя.

